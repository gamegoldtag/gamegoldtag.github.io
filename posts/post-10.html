<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CSP, HSTS, X-Content-Type, X-Frame-Options, Permissions-Policy. Nginx/Caddy 설정">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://ikakao.kr/posts/post-10.html">
  <title>웹 보안 헤더 최소 구성 — 실무에서 먼저 적용해야 할 것들 | Goldtag</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/variable/pretendardvariable.min.css">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2446729462046987"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fontsource/gowun-batang@5.0.20/700.css">
  <link rel="stylesheet" href="/style.css">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Article",
    "headline": "웹 보안 헤더 최소 구성 — 실무에서 먼저 적용해야 할 것들",
    "author": { "@type": "Person", "name": "ian.lab" },
    "publisher": { "@type": "Person", "name": "ian.lab" },
    "datePublished": "2025-04-18",
    "mainEntityOfPage": { "@type": "WebPage", "@id": "https://ikakao.kr/posts/post-10.html" }
  }
  </script>
</head>
<body>
  <header class="site-header">
    <div class="header-inner">
      <a class="logo" href="/">Gold<span>tag</span></a>
      <nav class="nav-links" aria-label="주요 메뉴">
        <a href="/">홈</a>
        <a href="/archive.html">전체 글</a>
        <a href="/about.html">소개</a>
        <a href="/contact.html">연락처</a>
      </nav>
    </div>
  </header>

  <div class="container-narrow">
    <nav class="breadcrumb" aria-label="경로">
      <a href="/">홈</a><span class="sep">/</span>
      <a href="/archive.html">Security</a><span class="sep">/</span>
      <span>현재 글</span>
    </nav>
  </div>

  <main class="post-wrap">
    <article class="post-card">
      <h1>웹 보안 헤더 최소 구성 — 실무에서 먼저 적용해야 할 것들</h1>
      <p class="meta">게시일: 2025년 4월 18일 · 13분 읽기</p>

<p>보안 감사에서 헤더 하나 때문에 통과 못 했다. 아주 간단한 헤더들을 설정하면 점수가 올라간다.</p>

<h3>필수 5가지 보안 헤더</h3>

<h4>1. Content-Security-Policy (CSP)</h4>

<p>어떤 리소스를 로드할 수 있는지 제한:</p>

<pre><code>Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self'
</code></pre>

<p>의미:</p>

<ul>
<li><code>default-src 'self'</code>: 같은 도메인에서만 로드</li>
<li><code>script-src 'self' 'unsafe-inline'</code>: JS는 같은 도메인 + 인라인 (점진적 마이그레이션)</li>
<li><code>style-src 'self'</code>: CSS는 같은 도메인만</li>
</ul>

<p>개선 버전 (인라인 제거):</p>

<pre><code>Content-Security-Policy: default-src 'self'; script-src 'self' https://cdn.jsdelivr.net; style-src 'self'; img-src 'self' data:; connect-src 'self' https://api.example.com
</code></pre>

<p>Nginx 설정:</p>

<pre><code>server {
    add_header Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self';" always;
}
</code></pre>

<h4>2. Strict-Transport-Security (HSTS)</h4>

<p>항상 HTTPS 사용:</p>

<pre><code>Strict-Transport-Security: max-age=31536000; includeSubDomains; preload
</code></pre>

<p>의미:</p>

<ul>
<li><code>max-age=31536000</code>: 1년간 HTTPS 강제</li>
<li><code>includeSubDomains</code>: 서브도메인도 포함</li>
<li><code>preload</code>: 브라우저 HSTS 목록에 등록</li>
</ul>

<p>Nginx:</p>

<pre><code>server {
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
}
</code></pre>

<h4>3. X-Content-Type-Options</h4>

<p>MIME 타입 스니핑 방지:</p>

<pre><code>X-Content-Type-Options: nosniff
</code></pre>

<p>예시: 공격자가 .jpg로 된 JavaScript 파일을 올림 → 브라우저가 실행 가능</p>

<p>이 헤더로 방지됨.</p>

<h4>4. X-Frame-Options</h4>

<p>Clickjacking 공격 방지:</p>

<pre><code>X-Frame-Options: SAMEORIGIN
</code></pre>

<p>또는:</p>

<pre><code>X-Frame-Options: DENY  # 모든 iframe 차단
</code></pre>

<h4>5. Referrer-Policy</h4>

<p>Referer 헤더 제어:</p>

<pre><code>Referrer-Policy: strict-origin-when-cross-origin
</code></pre>

<p>의미: 같은 도메인에는 전체 URL 전송, 다른 도메인에는 도메인만 전송</p>

<h3>전체 Nginx 설정</h3>

<pre><code>server {
    listen 443 ssl http2;
    server_name example.com;

    # SSL 인증서
    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;

    # 보안 헤더
    add_header Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self'" always;
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header Referrer-Policy "strict-origin-when-cross-origin" always;
    add_header Permissions-Policy "microphone=(), camera=()" always;

    location / {
        proxy_pass http://localhost:3000;
    }
}

# HTTP → HTTPS 리다이렉트
server {
    listen 80;
    server_name example.com;
    return 301 https://$server_name$request_uri;
}
</code></pre>

<h3>Express.js 설정</h3>

<p>helmet 라이브러리 사용 (권장):</p>

<pre><code>npm install helmet

// app.ts
import helmet from 'helmet';

app.use(helmet());

// 커스텀
app.use(helmet.contentSecurityPolicy({
    directives: {
        defaultSrc: ["'self'"],
        scriptSrc: ["'self'", 'https://cdn.jsdelivr.net'],
        styleSrc: ["'self'"],
    },
}));
</code></pre>

<h3>점수 개선</h3>

<table>
<tr><th>헤더</th><th>점수</th></tr>
<tr><td>헤더 없음</td><td>40/100</td></tr>
<tr><td>기본 5개</td><td>75/100</td></tr>
<tr><td>CSP + 강화</td><td>85/100</td></tr>
<tr><td>완전 구성</td><td>95/100</td></tr>
</table>

<h3>결론</h3>

<p>이 5개 헤더만 설정해도 대부분 보안 감사를 통과한다. 설정하는 데 10분 걸린다.</p>


      <div class="author-box">
        <div class="author-avatar">iL</div>
        <div class="author-info">
          <strong>ian.lab</strong>
          <p>28년 경력의 개발자. 실무에서 겪은 문제와 해결 과정을 기록합니다. 오류 제보는 <a href="/contact.html">연락처</a>로 보내주세요.</p>
        </div>
      </div>

      <div class="related-posts">
        <h3>관련 글 더 보기</h3>
        <div class="related-list">
        <a class="related-item" href="/posts/post-69.html">
          <span class="ri-cat">Security</span>
          <span class="ri-title">CORS 제대로 이해하기 — 삽질 없이 설정하는 법</span>
        </a>
        <a class="related-item" href="/posts/post-70.html">
          <span class="ri-cat">Security</span>
          <span class="ri-title">JWT 인증 구현 시 놓치기 쉬운 보안 포인트 7가지</span>
        </a>
        </div>
      </div>
    </article>
</main>

  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-links">
        <a href="/">홈</a>
        <a href="/archive.html">전체 글</a>
        <a href="/about.html">소개</a>
        <a href="/contact.html">연락처</a>
        <a href="/editorial-policy.html">운영 원칙</a>
        <a href="/privacy.html">개인정보처리방침</a>
        <a href="/terms.html">이용약관</a>
      </div>
      <div class="footer-copy">
        &copy; 2026 Goldtag. All rights reserved.<br>
        기술 정보는 실제 사용 환경에 맞게 검토 후 적용하세요.
      </div>
    </div>
  </footer>
</body>
</html>